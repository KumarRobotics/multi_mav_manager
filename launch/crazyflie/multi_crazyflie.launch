<launch>

  <arg name="sim" default="0"/>
  <arg name="config_path" value="$(find multi_mav_manager)/config/crazyflie"/>
  <arg name="launch_path" value="$(find multi_mav_manager)/launch/crazyflie"/>


  <include file="$(find crazyflie_driver)/launch/crazyflie_server.launch" unless="$(arg sim)"/>

  <group if="$(arg sim)">
    <rosparam file="$(arg config_path)/sim_params.yaml"/>
  </group>

  <include file="$(arg launch_path)/crazyflie.launch">
    <arg name="model" value="loco00"/>
    <arg name="sim" value="$(arg sim)"/>
    <arg name="config_path" value="$(arg config_path)"/>
    <arg name="uri" value="radio://0/60/2M/0xE7E7E7E700"/>
  </include>

  <include file="$(arg launch_path)/crazyflie.launch">
    <arg name="model" value="loco01"/>
    <arg name="sim" value="$(arg sim)"/>
    <arg name="config_path" value="$(arg config_path)"/>
    <arg name="uri" value="radio://0/60/2M/0xE7E7E7E701"/>
  </include>

  <include file="$(arg launch_path)/crazyflie.launch">
    <arg name="model" value="loco02"/>
    <arg name="sim" value="$(arg sim)"/>
    <arg name="config_path" value="$(arg config_path)"/>
    <arg name="uri" value="radio://0/60/2M/0xE7E7E7E702"/>
  </include>

  <include file="$(arg launch_path)/crazyflie.launch">
    <arg name="model" value="loco03"/>
    <arg name="sim" value="$(arg sim)"/>
    <arg name="config_path" value="$(arg config_path)"/>
    <arg name="uri" value="radio://1/70/2M/0xE7E7E7E703"/>
  </include>

  <include file="$(arg launch_path)/crazyflie.launch">
    <arg name="model" value="loco04"/>
    <arg name="sim" value="$(arg sim)"/>
    <arg name="config_path" value="$(arg config_path)"/>
    <arg name="uri" value="radio://1/70/2M/0xE7E7E7E704"/>
  </include>

  <include file="$(arg launch_path)/crazyflie.launch">
    <arg name="model" value="loco05"/>
    <arg name="sim" value="$(arg sim)"/>
    <arg name="config_path" value="$(arg config_path)"/>
    <arg name="uri" value="radio://1/70/2M/0xE7E7E7E705"/>
  </include>


  <node pkg="multi_mav_manager"
      type="multi_mav_services"
      name="multi_mav_services"
      output="screen">
    <rosparam file="$(arg config_path)/multi_mav_manager.yaml"/>
  </node>

  <node pkg="mocap_vicon"
    type="mocap_vicon_node"
    name="vicon"
    output="screen"
    unless="$(arg sim)">
    <param name="server_address" value="mocap"/>
    <param name="frame_rate" value="100"/>
    <param name="max_accel" value="10.0"/>
    <param name="publish_tf" value="false"/>
    <param name="fixed_frame_id" value="mocap"/>
    <rosparam param="model_list">[]</rosparam>
    <remap from="vicon/loco00/odom" to="/loco00/odom"/>
    <remap from="vicon/loco01/odom" to="/loco01/odom"/>
    <remap from="vicon/loco02/odom" to="/loco02/odom"/>
    <remap from="vicon/loco03/odom" to="/loco03/odom"/>
    <remap from="vicon/loco04/odom" to="/loco04/odom"/>
    <remap from="vicon/loco05/odom" to="/loco05/odom"/>
  </node>

</launch>
